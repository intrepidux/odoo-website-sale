<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <template id="home_page" name="Home Page">
            <t t-call="website.layout">
                <section>
                    <div class="container">
                        <div class="row">
                            <div id="main_div" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt32 mb32">
                                <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 home_tab_menu">
                                    <ul id="home_tab_nav" class="list-group nav nav-pills nav-stacked">
                                        <li t-att-class="'active' if tab == 'settings' else ''">
                                            <a href="#settings" data-toggle="tab" class="list-group-item text-center">
                                                <h4><i class="fa fa-user"/></h4><h4 class="hidden-xs">Settings</h4>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <div id="home_tab_content" class="col-lg-9 col-md-9 col-sm-9 col-xs-9 tab-content home_tab_content mt16 mb16">
                                    <div id="settings" t-att-class="'tab-pane %s' %('active' if tab == 'settings' else '')">
                                        <div id="info_div">
<!--
                                            <h4 class="text-center">(* = Required)</h4>
-->
                                            <form id="info_form" t-att-action="'/home/%s/info_update' % home_user.id if home_user else user_id.id" method="post" class="form-horizontal mt32" enctype="multipart/form-data" onsubmit="return formValidate();">
                                                <input type="hidden" name="home_user" t-att-value="home_user.id" />

                                                <h2 class="text-center">Login Information</h2>
                                                <div t-attf-class="form-group #{error and 'email' in error and 'has-error' or ''}">
                                                    <label class="col-md-3 col-sm-4 control-label" for="email">Email *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="email" class="form-control" name="email" required="True" t-att-value="home_user.partner_id.email"/>
                                                    </div>
                                                </div>
                                                <div t-attf-class="form-group #{error and 'login' in error and 'has-error' or ''}">
                                                    <label class="col-md-3 col-sm-4 control-label" for="login">Name For Login *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="text" class="form-control" name="login" required="True" t-att-value="home_user.login"/>
                                                    </div>
                                                </div>
                                                <div t-attf-class="form-group #{error and 'password' in error and 'has-error' or ''}">
                                                    <label class="col-md-3 col-sm-4 control-label" for="password">New Password *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input id="password" type="password" class="form-control" name="password" placeholder="Password (only when you want to change)" />
                                                    </div>
                                                </div>
                                                <div t-attf-class="form-group #{error and 'password' in error and 'has-error' or ''}">
                                                    <label class="col-md-3 col-sm-4 control-label" for="confirm_password">Confirm Password *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input id="confirm_password" type="password" class="form-control" name="confirm_password" placeholder="Same password (only when you want to change)" />
                                                    </div>
                                                </div>

                                                <h2 class="text-center">Payment Information</h2>
                                                <div class="form-group">
                                                    <label class="col-md-3 col-sm-4 control-label" for="ref">Customer Number</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <p class="input_readonly"><t t-esc="home_user.partner_id.ref"/></p>
                                                    </div>
                                                </div>
                                                <div class="form-group" t-if="home_user.partner_id.is_company">
                                                    <label class="col-md-3 col-sm-4 control-label" for="company">Is Company</label>
                                                    <div class="col-md-7 col-sm-8 input_readonly">
                                                        <input id="is_company" type="checkbox" name="is_company" value="1" t-att="{'checked': '1'} if home_user.partner_id.is_company else {}" disabled="1"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label id="label_name" t-att-class="'col-md-3 col-sm-4 control-label %s' %('hidden' if home_user.partner_id.is_company else '')" for="name">Name *</label>
                                                    <label id="label_company_name" t-att-class="'col-md-3 col-sm-4 control-label %s' %('hidden' if not home_user.partner_id.is_company else '')" for="name">Company Name *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="text" class="form-control" name="name" t-att-value="home_user.partner_id.name" required="True"/>
                                                    </div>
                                                </div>
                                                <div id="is_company_number" class="form-group" t-if="home_user.partner_id.is_company">
                                                    <label class="col-md-3 col-sm-4 control-label" for="vat">Organisations Number</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <p class="input_readonly"><t t-esc="home_user.partner_id.vat"/></p>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 col-sm-4 control-label" for="street">Street 1 *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="text" class="form-control" name="street" t-att-value="home_user.partner_id.street" required="True"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 col-sm-4 control-label" for="street2">Street 2</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="text" class="form-control" name="street2" t-att-value="home_user.partner_id.street2"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 col-sm-4 control-label" for="zip">Zip *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="text" class="form-control" name="zip" t-att-value="home_user.partner_id.zip" required="True"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 col-sm-4 control-label" for="city">City *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="text" class="form-control" name="city" t-att-value="home_user.partner_id.city" required="True"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 col-sm-4 control-label" for="country_id">Country *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <select class="form-control" name="country_id" required="True">
                                                            <t t-foreach="request.env['res.country'].search([])" t-as="country">
                                                                <option t-att-value="country.id" t-att="{'selected': 'checked'} if home_user.partner_id.country_id == country else {}"><t t-esc="country.name"/></option>
                                                            </t>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 col-sm-4 control-label" for="phone">Phone *</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="text" class="form-control" name="phone" required="True" t-att-value="home_user.partner_id.phone"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 col-sm-4 control-label" for="mobile">Mobile</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="text" class="form-control" name="mobile" t-att-value="home_user.partner_id.mobile"/>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label class="col-md-3 col-sm-4 control-label" for="fax">Fax</label>
                                                    <div class="col-md-7 col-sm-8">
                                                        <input type="text" class="form-control" name="fax" t-att-value="home_user.partner_id.fax"/>
                                                    </div>
                                                </div>
                                                <t t-if="home_user.partner_id.is_company and len(home_user.partner_id.child_ids) &gt; 0">
                                                    <t t-call="website_sale_home.children_info"/>
                                                </t>

                                                <t t-if="home_user.partner_id.is_company">
                                                    <h2 class="text-center">Bank Information</h2>
                                                    <t t-set="bank_id" t-value="None"/>
                                                    <t t-if="len(home_user.partner_id.bank_ids) &gt; 0">
                                                        <t t-set="bank_id" t-value="home_user.partner_id.bank_ids[0]"/>
                                                    </t>
                                                    <div class="form-group hidden">
                                                        <label class="col-md-3 col-sm-4 control-label" for="account_holder">Account Holder</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input type="text" class="form-control" name="account_holder" t-att-value="bank_id.partner_id.name if bank_id else ''" disabled="1"/>
                                                        </div>
                                                    </div>
                                                    <div id="bank_account" class="form-group">
                                                        <label class="col-md-3 col-sm-4 control-label" for="account_number">Account Number *</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input type="text" class="form-control" name="account_number" t-att-value="bank_id.acc_number if bank_id else ''"/>
                                                        </div>
                                                    </div>
                                                    <div class="form-group hidden">
                                                        <label class="col-md-3 col-sm-4 control-label" for="account_sort_code">Account Sort Code</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input type="text" class="form-control" name="account_sort_code" t-att-value="bank_id.bank_bic if bank_id else ''" disabled="1"/>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-md-3 col-sm-4 control-label" for="bank_name">Bank Name</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <t t-set="banks" t-value="request.env['res.bank'].search([])"/>
                                                            <select name="bank_name" class="form-control">
                                                                <t t-foreach="banks" t-as="bank">
                                                                    <option t-att-value="bank.id" t-att="({'selected': '1'} if bank_id.bank.id == bank.id else {}) if bank_id else {}"><t t-esc="bank.name"/></option>
                                                                </t>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group hidden">
                                                        <label class="col-md-3 col-sm-4 control-label" for="bank_type">Bank Account Type</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <select name="bank_type" class="form-control" readonly="1">
<!--
                                                                <option value="bank">Bank Account</option>
-->
                                                                <option value="bg" selected="1">Bankgiro</option>
<!--
                                                                <option value="iban">IBAN Account</option>
                                                                <option value="pg">Plusgiro</option>
-->
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div id="iban_account" class="form-group hidden">
                                                        <label class="col-md-3 col-sm-4 control-label" for="iban">IBAN</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input type="text" class="form-control" name="iban" value="" disabled="1"/>
                                                        </div>
                                                    </div>
                                                </t>

                                                <div class="form-group">
                                                    <div class="col-md-offset-3 col-sm-offset-4 col-sm-8 col-md-7">
                                                        <button id="submit_btn" class="btn btn-primary btn-lg">Send</button>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                      </div>
                    </div>
                </section>
            </t>
        </template>

        <template id="children_info">
            <div class="container">
                <ul class="nav nav-pills">
                    <t t-foreach="home_user.partner_id.child_ids" t-as="child">
                        <li t-att-class="'active' if child_index == 0 else ''">
                            <a t-att-href="'#child_%s' %child.id" data-toggle="tab" class="list-group-item text-center">
                                <span t-esc="child.name" class="hidden-xs"/><span t-esc="child.name[0]" class="hidden-lg hidden-md hidden-sm"/>
                            </a>
                        </li>
                    </t>
                </ul>
                <div class="tab-content">
                    <t t-foreach="home_user.partner_id.child_ids" t-as="child">
                        <div t-att-id="'child_%s' %child.id" t-att-class="'mt16 tab-pane fade %s' %('in active' if child_index == 0 else '')">
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_function' %child.id">Job Position</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_function' %child.id" t-att-value="child.function"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_email' %child.id">Email</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="email" class="form-control" t-att-name="'%s_email' %child.id" t-att-value="child.email"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_phone' %child.id">Phone</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_phone' %child.id" t-att-value="child.phone"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_mobile' %child.id">Mobile</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_mobile' %child.id" t-att-value="child.mobile"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_use_parent_address' %child.id">Use Company Address</label>
                                <div class="col-md-7 col-sm-8">
                                    <input id="use_parent_address" type="checkbox" t-att-name="'%s_use_parent_address' %child.id" value="1" t-att="{'checked': '1'} if child.use_parent_address else {}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_type' %child.id">Address Type</label>
                                <div class="col-md-7 col-sm-8">
                                    <select class="form-control" t-att-name="'%s_type' %child.id">
                                        <option value="default" t-att="{'selected': 'checked'} if child.type == 'default' else {}">Default</option>
                                        <option value="invoice" t-att="{'selected': 'checked'} if child.type == 'invoice' else {}">Invoice</option>
                                        <option value="delivery" t-att="{'selected': 'checked'} if child.type == 'delivery' else {}">Delivery</option>
                                        <option value="contact" t-att="{'selected': 'checked'} if child.type == 'contact' else {}">Contact</option>
                                        <option value="other" t-att="{'selected': 'checked'} if child.type == 'other' else {}">Other</option>
                                    </select>
                                </div>
                            </div>
                            <!-- this fileds should hide if child use parent address -->
                            <div t-att-id="'child_street_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_street' %child.id">Street 1</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_street' %child.id" t-att-value="child.street"/>
                                </div>
                            </div>
                            <div t-att-id="'child_street2_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_street2' %child.id">Street 2</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_street2' %child.id" t-att-value="child.street2"/>
                                </div>
                            </div>
                            <div t-att-id="'child_zip_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_zip' %child.id">Zip</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_zip' %child.id" t-att-value="child.zip"/>
                                </div>
                            </div>
                            <div t-att-id="'child_city_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_city' %child.id">City</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_city' %child.id" t-att-value="child.city"/>
                                </div>
                            </div>
                            <div t-att-id="'child_country_id_%s' %child_id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_country_id' %child.id">Country</label>
                                <div class="col-md-7 col-sm-8">
                                    <select class="form-control" t-att-name="'%s_country_id' %child.id">
                                        <t t-foreach="request.env['res.country'].search([])" t-as="country">
                                            <option t-att-value="country.id" t-att="{'selected': 'checked'} if child.country_id == country else {}"><t t-esc="country.name"/></option>
                                        </t>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </template>

        <template id="layout" inherit_id="website.layout">
            <xpath expr="//a[@href='/web']" position="replace">
                <a t-att-href="'/home/%s' %user_id.id" role="menuitem">My Account</a>
            </xpath>
        </template>

        <template id="assets_frontend" inherit_id="website.assets_frontend" name="Website Sale Home Assets Frontend">
            <xpath expr="." position="inside">
                <link rel="stylesheet" href="/website_sale_home/static/src/css/main.css" t-ignore="true"/>
                <script type="text/javascript" src="/website_sale_home/static/src/js/main.js"/>
            </xpath>
        </template>

    </data>
</openerp>
