<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="company_info_form" name="Website Home Company Info Form">
            <div class="col-md-12 mt32 mb32">
                <ul class="nav nav-tabs">
                    <li class="active">
                        <a data-toggle="tab" href="#delivery" class="hidden-xs">Delivery</a>
                        <a data-toggle="tab" href="#delivery" class="hidden-lg hidden-md hidden-sm">
                            <i class="fa fa-truck" />
                        </a>
                    </li>
                    <li class="">
                        <a data-toggle="tab" href="#invoice" class="hidden-xs">Invoice</a>
                        <a data-toggle="tab" href="#invoice" class="hidden-lg hidden-md hidden-sm">
                            <i class="fa fa-file-o" />
                        </a>
                    </li>
                    <li class="">
                        <a data-toggle="tab" href="#contact" class="hidden-xs">Contact</a>
                        <a data-toggle="tab" href="#contact" class="hidden-lg hidden-md hidden-sm">
                            <i class="fa fa-users" />
                        </a>
                    </li>
                </ul>
                <div class="tab-content">
                    <div id="delivery" class="tab-pane fade in active">
                        <p id="instruction_delivery" />
                        <div t-att-class="'form-group %s' %validation.get('delivery_street')">
                            <label class="col-md-3 col-sm-4 control-label" for="delivery_street">Street</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="delivery_street" t-att-value="delivery.street if delivery else ''" placeholder="" />
                                <small t-esc="help.get('help_delivery_street')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('delivery_street2')">
                            <label class="col-md-3 col-sm-4 control-label" for="delivery_street2">Street 2</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="delivery_street2" t-att-value="delivery.street2 if delivery else ''" placeholder="" />
                                <small t-esc="help.get('help_delivery_street2')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('delivery_zip')">
                            <label class="col-md-3 col-sm-4 control-label" for="delivery_zip">Zip</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="delivery_zip" t-att-value="delivery.zip if delivery else ''" placeholder="" />
                                <small t-esc="help.get('help_delivery_zip')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('delivery_city')">
                            <label class="col-md-3 col-sm-4 control-label" for="delivery_city">City</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="delivery_city" t-att-value="delivery.city if delivery else ''" placeholder="" />
                                <small t-esc="help.get('help_delivery_city')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('delivery_phone')">
                            <label class="col-md-3 col-sm-4 control-label" for="delivery_phone">Phone</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="delivery_phone" t-att-value="delivery.phone if delivery else ''" placeholder="" />
                                <small t-esc="help.get('help_delivery_phone')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('delivery_email')">
                            <label class="col-md-3 col-sm-4 control-label" for="delivery_email">Email</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="email" class="form-control" name="delivery_email" t-att-value="delivery.email if delivery else ''" placeholder="" />
                                <small t-esc="help.get('help_delivery_wmail')" />
                            </div>
                        </div>
                    </div>
                    <div id="invoice" class="tab-pane fade">
                        <p id="instruction_invoice" />
                        <div t-att-class="'form-group %s' %validation.get('invoice_street')">
                            <label class="col-md-3 col-sm-4 control-label" for="invoice_street">Street</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="invoice_street" t-att-value="invoice.street if invoice else ''" placeholder="" />
                                <small t-esc="help.get('help_invoice_street')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('invoice_street2')">
                            <label class="col-md-3 col-sm-4 control-label" for="invoice_street2">Street 2</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="invoice_street2" t-att-value="invoice.street2 if invoice else ''" placeholder="" />
                                <small t-esc="help.get('help_invoice_street2')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('invoice_zip')">
                            <label class="col-md-3 col-sm-4 control-label" for="invoice_zip">Zip</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="invoice_zip" t-att-value="invoice.zip if invoice else ''" placeholder="" />
                                <small t-esc="help.get('help_invoice_zip')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('invoice_city')">
                            <label class="col-md-3 col-sm-4 control-label" for="invoice_city">City</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="invoice_city" t-att-value="invoice.city if invoice else ''" placeholder="" />
                                <small t-esc="help.get('help_invoice_city')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('invoice_phone')">
                            <label class="col-md-3 col-sm-4 control-label" for="invoice_phone">Phone</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="text" class="form-control" name="invoice_phone" t-att-value="invoice.phone if invoice else ''" placeholder="" />
                                <small t-esc="help.get('help_invoice_phone')" />
                            </div>
                        </div>
                        <div t-att-class="'form-group %s' %validation.get('invoice_email')">
                            <label class="col-md-3 col-sm-4 control-label" for="invoice_email">Email</label>
                            <div class="col-md-7 col-sm-8">
                                <input type="email" class="form-control" name="invoice_email" t-att-value="invoice.email if invoice else ''" placeholder="" />
                                <small t-esc="help.get('help_invoice_email')" />
                            </div>
                        </div>
                    </div>
                    <div id="contact" class="tab-pane fade">
                        <table class="table table-responsive table-striped table-bordered">
                            <thead>
                                <th/>
                                <th>Name</th>
                                <th>Phone</th>
                                <th>Cell</th>
                                <th>Email</th>
                                <th/>
                            </thead>
                            <tbody>
                                <tr t-foreach="home_user.partner_id.commercial_partner_id.child_ids.filtered(lambda c: c.type == 'contact')" t-as="contact">
                                    <td>
                                        <img style="width: 32px; margin: 4px; border-radius: 2px;" t-att-src="'%s' %(('data:image/png;base64,%s' %contact.image_small) if contact.image_small else '/web/static/src/img/placeholder.png')"/>
                                    </td>
                                    <td>
                                        <a t-att-href="'/reseller_register/%s/contact/%s?token=%s' %(home_user.id, contact.id, home_user.partner_id.commercial_partner_id.token)"><span t-field="contact.name" /></a>
                                    </td>
                                    <td>
                                        <span t-field="contact.phone" />
                                    </td>
                                    <td>
                                        <span t-field="contact.mobile" />
                                    </td>
                                    <td>
                                        <span t-field="contact.email" />
                                    </td>
                                    <td class="text-center">
                                        <a t-att-href="'/reseller_register/%s/contact/%s/delete' % (home_user.id, contact.id)" class="fa fa-trash-o fa-2x" />
                                    </td>
                                </tr>
                                <tr>
                                    <td/>
                                    <td><a t-att-href="'/reseller_register/%s/contact/new?token=%s' % (home_user.id, home_user.partner_id.commercial_partner_id.token)"><u>New Contact</u></a></td>
                                    <td/>
                                    <td/>
                                    <td/>
                                    <td/>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </template>

        <template id="home_page" name="Home Page">
            <t t-call="website.layout">
                <div id="wrap" class="oe_structure oe_empty">
                    <section>
                        <div class="container">
                            <div class="row">
                                <div id="main_div" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt32 mb32">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 home_tab_menu">
                                        <ul id="home_tab_nav" class="list-group nav nav-tabs nav-justified">
                                            <li t-att-class="'active' if tab == 'settings' else ''">
                                                <a href="#settings" data-toggle="tab" class="list-group-item text-center">
                                                    <h4><i class="fa fa-user col-sm-12"/> Settings</h4>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div id="home_tab_content" class="tab-content home_tab_content mt16 mb16">
                                        <div id="settings" t-att-class="'tab-pane %s' %('active' if tab == 'settings' else '')">
                                            <div id="info_div">
    <!--
                                                <h4 class="text-center">(* = Required)</h4>
    -->
                                                <form id="info_form" t-att-action="'/home/%s/info_update?token=%s' % (home_user.id if home_user else user_id.id, home_user.partner_id.commercial_partner_id.token)" method="post" class="form-horizontal mt32" enctype="multipart/form-data" onsubmit="return formValidate();">
                                                    <input type="hidden" name="home_user" t-att-value="home_user.id" />
                                                    <div class="form-group">
                                                        <label class="col-md-3 col-sm-4 control-label" for="foobar1">Customer Number</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <p class="form-control-static" name="foobar1"><t t-esc="home_user.partner_id.commercial_partner_id.customer_no"/></p>
                                                        </div>
                                                    </div>
                                                    <div t-att-class="'form-group %s' %validation.get('company_name')">
                                                        <label class="col-md-3 col-sm-4 control-label" for="company_name">Customer Name</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input type="text" class="form-control" name="company_name" t-att-value="home_user.partner_id.commercial_partner_id.name" placeholder="" />
                                                        </div>
                                                    </div>
                                                    <h2 class="text-center">Login Information</h2>
                                                    <div t-attf-class="form-group #{error and 'email' in error and 'has-error' or ''}">
                                                        <label class="col-md-3 col-sm-4 control-label" for="email">Email *</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input type="email" class="form-control" name="email" required="True" t-att-value="home_user.partner_id.email"/>
                                                        </div>
                                                    </div>
                                                    <div t-attf-class="form-group #{error and 'login' in error and 'has-error' or ''}">
                                                        <label class="col-md-3 col-sm-4 control-label" for="login">Name For Login *</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input type="text" class="form-control" name="login" required="True" t-att-value="home_user.login"/>
                                                        </div>
                                                    </div>
<!--
                                                    <div t-attf-class="form-group #{error and 'password' in error and 'has-error' or ''}">
                                                        <label class="col-md-3 col-sm-4 control-label" for="password">New Password *</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input id="password" type="password" class="form-control" name="password" placeholder="Password (only when you want to change)" />
                                                        </div>
                                                    </div>
                                                    <div t-attf-class="form-group #{error and 'password' in error and 'has-error' or ''}">
                                                        <label class="col-md-3 col-sm-4 control-label" for="confirm_password">Confirm Password *</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input id="confirm_password" type="password" class="form-control" name="confirm_password" placeholder="Same password (only when you want to change)" />
                                                        </div>
                                                    </div>
-->
                                                    <t t-call="website_sale_home.company_info_form"/>
                                                    <div class="form-group">
                                                        <div class="col-md-offset-3 col-sm-offset-4 col-sm-8 col-md-7">
                                                            <button id="submit_btn" class="btn btn-primary btn-lg">Save</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </t>
        </template>

        <template id="children_info">
            <div class="container">
                <ul class="nav nav-pills">
                    <t t-foreach="home_user.partner_id.child_ids" t-as="child">
                        <li t-att-class="'active' if child_index == 0 else ''">
                            <a t-att-href="'#child_%s' %child.id" data-toggle="tab" class="list-group-item text-center">
                                <span t-esc="child.name" class="hidden-xs"/><span t-esc="child.name[0]" class="hidden-lg hidden-md hidden-sm"/>
                            </a>
                        </li>
                    </t>
                </ul>
                <div class="tab-content">
                    <t t-foreach="home_user.partner_id.child_ids" t-as="child">
                        <div t-att-id="'child_%s' %child.id" t-att-class="'mt16 tab-pane fade %s' %('in active' if child_index == 0 else '')">
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_function' %child.id">Job Position</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_function' %child.id" t-att-value="child.function"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_email' %child.id">Email</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="email" class="form-control" t-att-name="'%s_email' %child.id" t-att-value="child.email"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_phone' %child.id">Phone</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_phone' %child.id" t-att-value="child.phone"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_mobile' %child.id">Mobile</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_mobile' %child.id" t-att-value="child.mobile"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_use_parent_address' %child.id">Use Company Address</label>
                                <div class="col-md-7 col-sm-8">
                                    <input id="use_parent_address" type="checkbox" t-att-name="'%s_use_parent_address' %child.id" value="1" t-att="{'checked': '1'} if child.use_parent_address else {}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_type' %child.id">Address Type</label>
                                <div class="col-md-7 col-sm-8">
                                    <select class="form-control" t-att-name="'%s_type' %child.id">
                                        <option value="default" t-att="{'selected': 'checked'} if child.type == 'default' else {}">Default</option>
                                        <option value="invoice" t-att="{'selected': 'checked'} if child.type == 'invoice' else {}">Invoice</option>
                                        <option value="delivery" t-att="{'selected': 'checked'} if child.type == 'delivery' else {}">Delivery</option>
                                        <option value="contact" t-att="{'selected': 'checked'} if child.type == 'contact' else {}">Contact</option>
                                        <option value="other" t-att="{'selected': 'checked'} if child.type == 'other' else {}">Other</option>
                                    </select>
                                </div>
                            </div>
                            <!-- this fileds should hide if child use parent address -->
                            <div t-att-id="'child_street_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_street' %child.id">Street 1</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_street' %child.id" t-att-value="child.street"/>
                                </div>
                            </div>
                            <div t-att-id="'child_street2_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_street2' %child.id">Street 2</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_street2' %child.id" t-att-value="child.street2"/>
                                </div>
                            </div>
                            <div t-att-id="'child_zip_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_zip' %child.id">Zip</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_zip' %child.id" t-att-value="child.zip"/>
                                </div>
                            </div>
                            <div t-att-id="'child_city_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_city' %child.id">City</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_city' %child.id" t-att-value="child.city"/>
                                </div>
                            </div>
                            <div t-att-id="'child_country_id_%s' %child_id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_country_id' %child.id">Country</label>
                                <div class="col-md-7 col-sm-8">
                                    <select class="form-control" t-att-name="'%s_country_id' %child.id">
                                        <t t-foreach="request.env['res.country'].search([])" t-as="country">
                                            <option t-att-value="country.id" t-att="{'selected': 'checked'} if child.country_id == country else {}"><t t-esc="country.name"/></option>
                                        </t>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </template>

        <template id="layout" inherit_id="website.layout">
            <xpath expr="//a[@href='/web']" position="replace">
                <a t-att-href="'/home/%s' %user_id.id" role="menuitem">My Account</a>
            </xpath>
        </template>

        <template id="assets_frontend" inherit_id="website.assets_frontend" name="Website Sale Home Assets Frontend">
            <xpath expr="." position="inside">
                <link rel="stylesheet" href="/website_sale_home/static/src/css/main.css" t-ignore="true"/>
                <script type="text/javascript" src="/website_sale_home/static/src/js/main.js"/>
            </xpath>
        </template>

    </data>
</openerp>
