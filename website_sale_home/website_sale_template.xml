<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <template id="home_page" name="Home Page">
            <t t-call="website.layout">
                <div id="wrap" class="oe_structure oe_empty">
                    <section>
                        <div class="container">
                            <div class="row">
                                <div id="main_div" class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mt32 mb32">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 home_tab_menu">
                                        <ul id="home_tab_nav" class="list-group nav nav-tabs nav-justified">
                                            <li t-att-class="'active' if tab == 'settings' else ''">
                                                <a href="#settings" data-toggle="tab" class="list-group-item text-center">
                                                    <h4><i class="fa fa-user"/></h4><h4 class="hidden-xs">Settings</h4>
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div id="home_tab_content" class="col-lg-9 col-md-9 col-sm-9 col-xs-9 tab-content home_tab_content mt16 mb16">
                                        <div id="settings" t-att-class="'tab-pane %s' %('active' if tab == 'settings' else '')">
                                            <div id="info_div">
    <!--
                                                <h4 class="text-center">(* = Required)</h4>
    -->
                                                <form id="info_form" t-att-action="'/home/%s/info_update' % home_user.id if home_user else user_id.id" method="post" class="form-horizontal mt32" enctype="multipart/form-data" onsubmit="return formValidate();">
                                                    <input type="hidden" name="home_user" t-att-value="home_user.id" />
                                                    <div class="form-group">
                                                        <label class="col-md-3 col-sm-4 control-label" for="foobar1">Customer Number</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <p class="form-control-static" name="foobar1"><t t-esc="home_user.partner_id.customer_no"/></p>
                                                        </div>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="col-md-3 col-sm-4 control-label" for="foobar2">Customer Name</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <p class="form-control-static" name="foobar2"><t t-esc="home_user.partner_id.commercial_partner_id.name"/></p>
                                                        </div>
                                                    </div>
                                                    <h2 class="text-center">Login Information</h2>
                                                    <div t-attf-class="form-group #{error and 'email' in error and 'has-error' or ''}">
                                                        <label class="col-md-3 col-sm-4 control-label" for="email">Email *</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input type="email" class="form-control" name="email" required="True" t-att-value="home_user.partner_id.email"/>
                                                        </div>
                                                    </div>
                                                    <div t-attf-class="form-group #{error and 'login' in error and 'has-error' or ''}">
                                                        <label class="col-md-3 col-sm-4 control-label" for="login">Name For Login *</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input type="text" class="form-control" name="login" required="True" t-att-value="home_user.login"/>
                                                        </div>
                                                    </div>
                                                    <div t-attf-class="form-group #{error and 'password' in error and 'has-error' or ''}">
                                                        <label class="col-md-3 col-sm-4 control-label" for="password">New Password *</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input id="password" type="password" class="form-control" name="password" placeholder="Password (only when you want to change)" />
                                                        </div>
                                                    </div>
                                                    <div t-attf-class="form-group #{error and 'password' in error and 'has-error' or ''}">
                                                        <label class="col-md-3 col-sm-4 control-label" for="confirm_password">Confirm Password *</label>
                                                        <div class="col-md-7 col-sm-8">
                                                            <input id="confirm_password" type="password" class="form-control" name="confirm_password" placeholder="Same password (only when you want to change)" />
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <div class="col-md-offset-3 col-sm-offset-4 col-sm-8 col-md-7">
                                                            <button id="submit_btn" class="btn btn-primary btn-lg">Send</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                          </div>
                        </div>
                    </section>
                </div>
            </t>
        </template>

        <template id="children_info">
            <div class="container">
                <ul class="nav nav-pills">
                    <t t-foreach="home_user.partner_id.child_ids" t-as="child">
                        <li t-att-class="'active' if child_index == 0 else ''">
                            <a t-att-href="'#child_%s' %child.id" data-toggle="tab" class="list-group-item text-center">
                                <span t-esc="child.name" class="hidden-xs"/><span t-esc="child.name[0]" class="hidden-lg hidden-md hidden-sm"/>
                            </a>
                        </li>
                    </t>
                </ul>
                <div class="tab-content">
                    <t t-foreach="home_user.partner_id.child_ids" t-as="child">
                        <div t-att-id="'child_%s' %child.id" t-att-class="'mt16 tab-pane fade %s' %('in active' if child_index == 0 else '')">
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_function' %child.id">Job Position</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_function' %child.id" t-att-value="child.function"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_email' %child.id">Email</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="email" class="form-control" t-att-name="'%s_email' %child.id" t-att-value="child.email"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_phone' %child.id">Phone</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_phone' %child.id" t-att-value="child.phone"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_mobile' %child.id">Mobile</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_mobile' %child.id" t-att-value="child.mobile"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_use_parent_address' %child.id">Use Company Address</label>
                                <div class="col-md-7 col-sm-8">
                                    <input id="use_parent_address" type="checkbox" t-att-name="'%s_use_parent_address' %child.id" value="1" t-att="{'checked': '1'} if child.use_parent_address else {}"/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_type' %child.id">Address Type</label>
                                <div class="col-md-7 col-sm-8">
                                    <select class="form-control" t-att-name="'%s_type' %child.id">
                                        <option value="default" t-att="{'selected': 'checked'} if child.type == 'default' else {}">Default</option>
                                        <option value="invoice" t-att="{'selected': 'checked'} if child.type == 'invoice' else {}">Invoice</option>
                                        <option value="delivery" t-att="{'selected': 'checked'} if child.type == 'delivery' else {}">Delivery</option>
                                        <option value="contact" t-att="{'selected': 'checked'} if child.type == 'contact' else {}">Contact</option>
                                        <option value="other" t-att="{'selected': 'checked'} if child.type == 'other' else {}">Other</option>
                                    </select>
                                </div>
                            </div>
                            <!-- this fileds should hide if child use parent address -->
                            <div t-att-id="'child_street_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_street' %child.id">Street 1</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_street' %child.id" t-att-value="child.street"/>
                                </div>
                            </div>
                            <div t-att-id="'child_street2_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_street2' %child.id">Street 2</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_street2' %child.id" t-att-value="child.street2"/>
                                </div>
                            </div>
                            <div t-att-id="'child_zip_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_zip' %child.id">Zip</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_zip' %child.id" t-att-value="child.zip"/>
                                </div>
                            </div>
                            <div t-att-id="'child_city_%s' %child.id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_city' %child.id">City</label>
                                <div class="col-md-7 col-sm-8">
                                    <input type="text" class="form-control" t-att-name="'%s_city' %child.id" t-att-value="child.city"/>
                                </div>
                            </div>
                            <div t-att-id="'child_country_id_%s' %child_id" t-att-class="'form-group %s' %('hidden' if child.use_parent_address else '')">
                                <label class="col-md-3 col-sm-4 control-label" t-att-for="'%s_country_id' %child.id">Country</label>
                                <div class="col-md-7 col-sm-8">
                                    <select class="form-control" t-att-name="'%s_country_id' %child.id">
                                        <t t-foreach="request.env['res.country'].search([])" t-as="country">
                                            <option t-att-value="country.id" t-att="{'selected': 'checked'} if child.country_id == country else {}"><t t-esc="country.name"/></option>
                                        </t>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </t>
                </div>
            </div>
        </template>

        <template id="layout" inherit_id="website.layout">
            <xpath expr="//a[@href='/web']" position="replace">
                <a t-att-href="'/home/%s' %user_id.id" role="menuitem">My Account</a>
            </xpath>
        </template>

        <template id="assets_frontend" inherit_id="website.assets_frontend" name="Website Sale Home Assets Frontend">
            <xpath expr="." position="inside">
                <link rel="stylesheet" href="/website_sale_home/static/src/css/main.css" t-ignore="true"/>
                <script type="text/javascript" src="/website_sale_home/static/src/js/main.js"/>
            </xpath>
        </template>

    </data>
</openerp>
